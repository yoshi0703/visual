# クチトル (Kuchitoru)

![クチトル - 口コミを自動で集める](./public/og-image.png)

## 概要

クチトルは、飲食店や小売店、サービス業などの小規模事業者向けに作られた、顧客の声を収集してGoogle口コミ投稿を促進するためのサービスです。

店舗のウェブサイトURLを入力するだけで、AI（GeminiとOpenAI）が店舗情報を分析し、最適なQRコードとチャットボットを生成します。お客様はQRコードをスキャンして、AIチャットボットと会話するだけで簡単に口コミが投稿できます。

> **私たちのビジョン**: おばあちゃん店舗でも「URLを入れるだけでQRができて、置いたら口コミが増える」状態を実現すること。

## 主な機能

- **シンプルなオンボーディング**: URLを入力するだけで店舗情報を自動解析
- **AIチャットボット**: お客様とAIが自然に会話して感想を収集
- **自動レビュー生成**: 会話内容からGoogle口コミ用のテキストを自動生成
- **ダッシュボード**: お客様の声の傾向分析、キーワード抽出
- **QRコード管理**: 印刷用QRコードの生成・管理

## 技術スタック

- **フロントエンド**: React + TypeScript + Tailwind CSS
- **バックエンド**: Netlify Functions (サーバーレス)
- **データベース**: Supabase (PostgreSQL)
- **認証**: Supabase Auth
- **AI サービス**: 
  - Google Gemini API (店舗情報解析)
  - OpenAI API (チャットボット・レビュー生成)
- **ホスティング**: Netlify

## 環境構築

### 前提条件

- Node.js 18+
- npm or yarn
- Supabase アカウント
- OpenAI API キー
- Google Gemini API キー

### インストール

1. リポジトリのクローン:
   ```bash
   git clone https://github.com/yourusername/kuchitoru.git
   cd kuchitoru

###　メモ
ファイルをアップロードする際は、必ず ユーザーID/ファイル名 というパス構造でアップロードする必要があります。例えば、ユーザーIDが abc-123-xyz の人が avatar.png をアップロードする場合、アップロード先のパスは abc-123-xyz/avatar.png と指定します。

# Jina AI ウェブスクレイピングシステム

Jina AIのReader APIを活用した高度なウェブスクレイピングシステムです。店舗のウェブサイトから自動的に情報を抽出し、高い精度で店舗情報を取得します。

## 特徴

- **Jina AI Reader API統合**: HTMLからマークダウンへの高品質変換
- **OpenAI GPT-4o活用**: 抽出されたコンテンツから情報を構造化
- **信頼性スコアリング**: 抽出情報の信頼度を可視化
- **代替情報源探索**: 関連する外部情報源からの情報補完
- **フォールバックメカニズム**: 複数のスクレイピング手法を組み合わせた堅牢性
- **モダンなUI**: タブベースの結果表示とインタラクティブな進行状況表示

## 前提条件

- Node.js 16+
- Supabase アカウント
- OpenAI API キー
- Netlify (オプション、デプロイメント用)

## セットアップ

1. リポジトリのクローン作成:

```bash
git clone https://github.com/yourusername/jina-ai-web-scraping.git
cd jina-ai-web-scraping
```

2. 依存関係のインストール:

```bash
npm install
```

3. 環境変数の設定:

```bash
cp .env.example .env.local
```

`.env.local`ファイルを編集し、必要な環境変数を設定します。

4. Supabase Edge Functionsのデプロイ:

```bash
supabase functions deploy website-analysis
```

## 使用方法

1. 開発サーバーの起動:

```bash
npm run dev
```

2. ブラウザで `http://localhost:3000` にアクセス

3. 管理画面から店舗情報ページに移動し、「ウェブサイト分析」ボタンをクリック

4. 分析するウェブサイトのURLを入力し、「分析開始」ボタンをクリック

5. 抽出された情報を確認、編集し、「この内容を使用する」ボタンをクリック

## 動作の仕組み

1. **URLの検証と前処理**: 入力されたURLの形式を確認し、必要に応じてプロトコルを追加

2. **Jina Reader API活用**: URLからHTMLコンテンツを取得し、マークダウン形式に変換
   - Jina AIが複雑なHTMLを処理し、重要なコンテンツを抽出

3. **AI情報抽出**: GPT-4oモデルを使用して店舗情報を構造化
   - 店舗名、説明、特徴、住所などを自動的に特定

4. **信頼性評価**: 抽出された各情報に信頼度スコアを付与
   - 情報源や抽出プロセスに基づいて算出

5. **フォールバックメカニズム**: Jina APIが失敗した場合は直接スクレイピングを試行
   - 複数の情報源から最適な結果を統合

6. **代替情報源探索**: 関連する外部サイトからの情報取得
   - Google Maps、食べログなどの主要サービスと連携

## 拡張ポイント

このシステムは以下のような方向に拡張可能です：

- **画像解析**: ウェブサイト上の画像から追加情報の抽出
- **位置情報連携**: 住所からより詳細な位置情報の取得
- **マルチページ分析**: サイト内の複数ページを横断した情報収集
- **競合分析**: 同業他社との比較データの収集
- **定期的な情報更新**: スケジュールに基づく情報の自動更新

## ライセンス

MIT

## 謝辞

- [Jina AI](https://jina.ai) - Reader APIの提供
- [OpenAI](https://openai.com) - GPT-4oモデルの提供
- [Supabase](https://supabase.com) - バックエンド基盤の提供